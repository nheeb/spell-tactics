[gd_scene load_steps=12 format=3 uid="uid://dkl8yhcu2dmjh"]

[ext_resource type="Material" uid="uid://dybc4a2mp16cg" path="res://Assets/Materials/TileGroundMaterial.tres" id="1_24n3e"]
[ext_resource type="Script" path="res://Entities/Visuals/VisualPlayer.gd" id="2_nidg8"]
[ext_resource type="PackedScene" uid="uid://667ohrdomp4u" path="res://Assets/Models/Character/MagicRaccoon_Model.tscn" id="3_p2lke"]
[ext_resource type="PackedScene" uid="uid://71nxh6lmao86" path="res://UI/HPLabel.tscn" id="4_joyyb"]
[ext_resource type="PackedScene" uid="uid://dox42qum5t0vk" path="res://Logic/GeneralUtility/OrbitalMovementBody.tscn" id="5_yrafp"]
[ext_resource type="PackedScene" uid="uid://bxdl5jg7evhch" path="res://UI/HealthBar.tscn" id="6_75dho"]

[sub_resource type="CapsuleMesh" id="CapsuleMesh_v522e"]

[sub_resource type="CylinderMesh" id="CylinderMesh_q4f3v"]
material = ExtResource("1_24n3e")
top_radius = 1.0
bottom_radius = 1.0
height = 0.2
radial_segments = 6
rings = 1

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_aaaaa"]
albedo_color = Color(0.32549, 0.65098, 0.890196, 1)
emission_enabled = true
emission = Color(0.32549, 0.65098, 0.890196, 1)

[sub_resource type="QuadMesh" id="QuadMesh_iyll5"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_dn2tl"]
resource_local_to_scene = true
render_priority = 2
transparency = 1
no_depth_test = true
shading_mode = 0
billboard_mode = 1

[node name="VisualPlayer" type="Node3D"]
script = ExtResource("2_nidg8")
idle_break_chance = 0.5

[node name="Capsule" type="MeshInstance3D" parent="."]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 0, 0.5, 0)
visible = false
mesh = SubResource("CapsuleMesh_v522e")

[node name="DebugTile" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.1, 0)
visible = false

[node name="Hexagon" type="MeshInstance3D" parent="DebugTile"]
mesh = SubResource("CylinderMesh_q4f3v")

[node name="MagicRaccoon_Model" parent="." instance=ExtResource("3_p2lke")]
transform = Transform3D(1.35, 0, 0, 0, 1.35, 0, 0, 0, 1.35, 0, 0, 0)

[node name="Skeleton3D" parent="MagicRaccoon_Model/MagicRaccoon/rig_deform" index="0"]
bones/0/position = Vector3(-0.00314386, 0.369355, -0.0229833)
bones/0/rotation = Quaternion(-0.050931, -0.0991265, -0.00508039, 0.993758)
bones/1/rotation = Quaternion(-0.0220135, 0.000162804, 0.00727541, 0.999731)
bones/2/rotation = Quaternion(0.0533042, 0.0723923, 0.0126808, 0.99587)
bones/3/rotation = Quaternion(0.107235, 0.0228272, 0.0094552, 0.993927)
bones/4/rotation = Quaternion(0.122644, -0.0018874, -0.0118921, 0.992378)
bones/5/rotation = Quaternion(0.0011267, -0.00123075, -1.48645e-06, 0.999999)
bones/6/rotation = Quaternion(0.0418713, -0.00539584, -0.0156609, 0.998986)
bones/9/rotation = Quaternion(0.0121926, 0.0519826, -0.3836, 0.921955)
bones/10/rotation = Quaternion(0.0121928, -0.0519821, 0.3836, 0.921955)
bones/13/rotation = Quaternion(-0.0608169, 0.6312, -0.555623, 0.537746)
bones/14/position = Vector3(-4.11505e-08, 0.0618311, -2.74082e-08)
bones/14/rotation = Quaternion(8.01174e-08, 0.0155845, -7.84125e-08, 0.999879)
bones/15/rotation = Quaternion(0.530019, 0.0149152, -0.0093242, 0.847804)
bones/16/position = Vector3(1.13375e-08, 0.0650871, 7.04821e-08)
bones/16/rotation = Quaternion(-6.22612e-08, -0.548819, -3.9201e-08, 0.835941)
bones/17/rotation = Quaternion(0.0883597, -0.548849, -0.0326524, 0.830597)
bones/18/rotation = Quaternion(0.52426, 0.480687, 0.517791, -0.475378)
bones/19/rotation = Quaternion(0.13149, 0.750206, -0.0969332, 0.640707)
bones/20/rotation = Quaternion(-0.0249935, -0.00130346, 0.00715572, 0.999661)
bones/21/rotation = Quaternion(0.0152342, 0.00185651, -0.0160513, 0.999753)
bones/22/rotation = Quaternion(0.0638659, 0.917007, 0.328717, -0.216712)
bones/23/rotation = Quaternion(0.0573854, -0.19883, 0.0221205, 0.978102)
bones/24/rotation = Quaternion(-0.0806276, 0.00347541, -0.0281809, 0.99634)
bones/26/rotation = Quaternion(0.160529, 0.712547, -0.126928, 0.671116)
bones/27/rotation = Quaternion(0.0282394, -0.000756411, 0.00353632, 0.999595)
bones/28/rotation = Quaternion(-0.0300165, 0.000887071, -0.008683, 0.999511)
bones/30/rotation = Quaternion(0.200248, 0.698146, -0.183246, 0.662506)
bones/31/rotation = Quaternion(-0.0605407, 0.000706565, -0.00358844, 0.998159)
bones/32/rotation = Quaternion(0.0338515, -0.00166246, 0.00966517, 0.999379)
bones/34/rotation = Quaternion(0.201131, 0.651485, -0.237246, 0.691974)
bones/35/rotation = Quaternion(-0.0529755, 0.00107847, -0.00329224, 0.99859)
bones/36/rotation = Quaternion(-0.104454, -0.00167237, 0.00827714, 0.994494)
bones/39/rotation = Quaternion(0.174841, -0.645355, 0.387235, 0.63482)
bones/40/rotation = Quaternion(-1.8726e-07, 0.0313773, 2.70069e-07, 0.999508)
bones/41/position = Vector3(-2.874e-08, 0.0622004, 7.40695e-09)
bones/41/rotation = Quaternion(0.527506, 0.031947, -0.0198563, 0.848718)
bones/42/rotation = Quaternion(1.7227e-07, 0.274217, -3.12598e-07, 0.961668)
bones/43/rotation = Quaternion(0.0416551, 0.273865, 1.17461e-05, 0.960866)
bones/44/rotation = Quaternion(0.0120804, 0.738732, 0.672393, -0.0449122)
bones/45/rotation = Quaternion(0.191245, -0.738748, 0.136338, 0.631735)
bones/46/rotation = Quaternion(0.537888, 0.0913215, -0.067406, 0.83534)
bones/47/rotation = Quaternion(0.575358, 0.00750023, 0.0143094, 0.817742)
bones/48/rotation = Quaternion(-0.121542, 0.915058, 0.302559, 0.237393)
bones/49/rotation = Quaternion(0.174706, -0.0167703, -0.00741115, 0.98445)
bones/50/rotation = Quaternion(0.0340248, -0.000225566, 0.0283911, 0.999018)
bones/52/rotation = Quaternion(0.264522, -0.684051, 0.230814, 0.639397)
bones/53/rotation = Quaternion(0.572141, 0.0466891, -0.0369524, 0.817991)
bones/54/rotation = Quaternion(0.524622, 0.00403388, 0.00774014, 0.851291)
bones/56/rotation = Quaternion(0.24099, -0.683709, 0.26304, 0.636613)
bones/57/rotation = Quaternion(0.592123, 0.0862922, -0.059413, 0.799009)
bones/58/rotation = Quaternion(0.66819, -0.00493718, -0.00847218, 0.743926)
bones/59/rotation = Quaternion(-0.0355223, -0.66546, 0.00606221, 0.745564)
bones/60/rotation = Quaternion(0.247234, -0.63446, 0.272161, 0.6799)
bones/61/rotation = Quaternion(0.497707, 0.0463432, -0.0227783, 0.865807)
bones/62/rotation = Quaternion(0.45278, -0.0030932, -0.0078553, 0.891582)
bones/64/rotation = Quaternion(0.989434, -0.0232988, 0.00487696, -0.143018)
bones/65/rotation = Quaternion(-0.171131, -0.000130749, -0.000596878, 0.985248)
bones/66/rotation = Quaternion(-0.0132747, -3.47703e-05, -0.000610079, 0.999912)
bones/67/rotation = Quaternion(0.0111904, -1.98352e-05, -0.000610754, 0.999937)
bones/68/rotation = Quaternion(0.90985, -0.0751127, -0.113057, -0.392109)
bones/69/rotation = Quaternion(0.0498032, -0.00150534, 0.0489411, 0.997558)
bones/70/rotation = Quaternion(0.0645458, -0.00222696, 0.0488857, 0.996714)
bones/71/rotation = Quaternion(0.0965004, -0.00379741, 0.0488166, 0.994128)
bones/72/rotation = Quaternion(0.00864894, 0.000512895, 0.0489615, 0.998763)
bones/75/rotation = Quaternion(0.985562, 0.13559, 0.00129301, 0.1014)
bones/76/position = Vector3(2.44517e-09, 0.0837741, 2.07053e-08)
bones/76/rotation = Quaternion(-7.6252e-08, -0.0642281, -1.68682e-08, 0.997935)
bones/77/position = Vector3(2.45001e-08, 0.0837742, -6.3258e-09)
bones/77/rotation = Quaternion(0.252368, -0.0644018, 0.0168366, 0.965339)
bones/78/position = Vector3(3.54697e-09, 0.108287, -1.79151e-09)
bones/78/rotation = Quaternion(-1.16528e-09, -0.0546178, -1.78771e-08, 0.998507)
bones/79/rotation = Quaternion(-0.663757, -0.0542425, 0.0790011, 0.741784)
bones/80/rotation = Quaternion(6.13985e-05, 0.99341, -0.114613, -6.18556e-06)
bones/81/rotation = Quaternion(0.985457, -0.128157, -0.00122192, -0.111576)
bones/82/rotation = Quaternion(1.64135e-08, 0.0362812, -4.03238e-09, 0.999342)
bones/83/position = Vector3(1.02634e-09, 0.0853412, -3.25319e-09)
bones/83/rotation = Quaternion(0.101808, 0.0353065, -0.00361555, 0.994171)
bones/84/rotation = Quaternion(-5.17125e-08, 0.0279811, 9.58465e-09, 0.999608)
bones/85/rotation = Quaternion(-0.718392, 0.0282152, -0.150267, 0.678629)
bones/86/rotation = Quaternion(0.000101334, 0.993328, -0.115326, -1.2637e-05)

[node name="RightHand" parent="MagicRaccoon_Model" index="2"]
transform = Transform3D(-0.999467, 0.0221458, 0.0240061, 0.0219815, 0.999733, -0.00709561, -0.0241568, -0.00656392, -0.999687, 0.214799, 0.672421, -0.193257)

[node name="MeshInstance3D" parent="MagicRaccoon_Model/RightHand" index="0"]
surface_material_override/1 = SubResource("StandardMaterial3D_aaaaa")

[node name="Gem" type="Node3D" parent="MagicRaccoon_Model/RightHand" index="1"]
transform = Transform3D(0.999195, 0.0401168, 9.44287e-05, -0.0401164, 0.999194, -0.000890057, -0.000129808, 0.000885604, 0.999999, 0.00178528, 0.252752, 4.60148e-05)

[node name="OmniLight3D" type="OmniLight3D" parent="MagicRaccoon_Model/RightHand/Gem"]
light_color = Color(0.32549, 0.65098, 0.890196, 1)
omni_range = 3.57803

[node name="LeftHand" parent="MagicRaccoon_Model" index="3"]
transform = Transform3D(-0.998101, -0.00434498, -0.0614471, -0.00193642, 0.999229, -0.0392006, 0.0615701, -0.039007, -0.99734, -0.162471, 0.653687, -0.189018)

[node name="IdleBreakChance" type="Timer" parent="."]
wait_time = 5.0
autostart = true

[node name="HPLabel" parent="." instance=ExtResource("4_joyyb")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.5, 0)
visible = false

[node name="OrbitalMovementBody" parent="." instance=ExtResource("5_yrafp")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.881703, 0)

[node name="HealthbarQuad" type="MeshInstance3D" parent="."]
transform = Transform3D(1.27998, 0, 0, 0, 1.27998, 0, 0, 0, 1.27998, 0, 1.5449, 0)
mesh = SubResource("QuadMesh_iyll5")
surface_material_override/0 = SubResource("StandardMaterial3D_dn2tl")

[node name="SubViewport" type="SubViewport" parent="."]
disable_3d = true
transparent_bg = true
render_target_update_mode = 4

[node name="HealthBar2D" parent="SubViewport" instance=ExtResource("6_75dho")]

[connection signal="timeout" from="IdleBreakChance" to="." method="_on_idle_break_chance_timeout"]

[editable path="MagicRaccoon_Model"]
